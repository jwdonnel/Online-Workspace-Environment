var appRemote_Config = { animationSpeed: 150, closeTimeout: 2e3, backOnAction: false, remoteId: "", remoteName: "", categoryId: "", categoryName: "", currUrl: "", desktopCSS: "remote_desktop.css", mobileCSS: "remote_mobile.css", winMinWidth: 800, workspaceMode: "", notiInterval: 7e3, siteTheme: "Standard", siteRootFolder: "" }; var appRemote = function () { function s(e) { if (e != null && e != undefined) { var t = $.trim(e.toString().toLowerCase()); if (t != "true" && t != "false" && t != "0" && t != "1" && t != "") { return true } if (t == "1" || t == "true" || t == "") { return true } else if (t == "0" || t == "false") { return false } } return false } function o() { if (appRemote_Config.workspaceMode.toLowerCase() == "complex" || appRemote_Config.workspaceMode == "") { return true } return false } function u() { a(); c() } function a() { if ($(window).width() <= appRemote_Config.winMinWidth || $("#pnl_chat_users").length == 0) { if (i != "mobile") { i = "mobile"; l(appRemote_Config.desktopCSS); f(appRemote_Config.mobileCSS); var e = window.location.href.split("#"); if (e.length == 1) { window.location += "#" } var t = location.hash; h(t) } } else { if (i != "desktop") { i = "desktop"; l(appRemote_Config.mobileCSS); f(appRemote_Config.desktopCSS) } } } function f(e) { var t = openWSE.siteRoot() + "App_Themes/" + appRemote_Config.siteTheme + "/" + e; $("link[href='" + t + "']").remove(); var n = document.getElementsByTagName("head")[0]; link = document.createElement("link"); link.type = "text/css"; link.rel = "stylesheet"; link.href = t; n.appendChild(link) } function l(e) { var t = openWSE.siteRoot() + "App_Themes/" + appRemote_Config.siteTheme + "/" + e; $("link[href='" + t + "']").remove() } function c() { if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) { var e = document.getElementsByTagName("head")[0]; meta = document.createElement("meta"); meta.name = "viewport"; meta.id = "mobileViewport"; meta.content = "initial-scale=0.90, user-scalable=no"; e.appendChild(meta) } else { if ($("#mobileViewport").length > 0) { $("#mobileViewport").remove() } } } function h(e) { if (!r) { currUrl = e; $("#workspace-selector-overlay, #workspace-selector-modal").fadeOut(appRemote_Config.animationSpeed); $("#loading-message-modal").html(""); if (e == "") { H(false) } else if (e.indexOf("notiOn=true") != -1) { R(true); $("#notifications-viewtable").show() } else { if ($("#notifications-viewtable").css("display") == "block") { $("#notifications-viewtable").hide(); $("#NotificationHolder").html("") } var t = e.split("?id="); if (t.length > 1) { t = t[1].split("&category="); if (t.length == 2) { if (t[0] == "chatClient") { p(t) } else { if ($("#pnl_chat_users").length > 0) { $("#pnl_chat_users").hide(); if (i != "desktop") { $("#pnl_chat_popup").hide() } } appRemote_Config.categoryId = t[0]; var n = t[1].split("&appId="); if (n.length == 2) { appRemote_Config.categoryName = n[0]; n = n[1].split("&name="); if (n[0].indexOf("app-") == 0) { appRemote_Config.remoteId = n[0]; appRemote_Config.remoteName = n[1]; b(appRemote_Config.remoteId, appRemote_Config.remoteName) } else { p(t) } } else { if ($("#pnl_options").css("display") == "block") { w(); E(false) } else if (t[1].indexOf("&appId=") == -1) { P(t[0], t[1], false) } } } } } else { if ($("#pnl_chat_users").length > 0) { $("#pnl_chat_users").hide() } var n = t[0].split("?appId="); if (n.length == 2) { n = n[1].split("&name="); if (n[0].indexOf("app-") == 0) { appRemote_Config.remoteId = n[0]; appRemote_Config.remoteName = n[1]; b(appRemote_Config.remoteId, appRemote_Config.remoteName) } } else { E(false) } } } } else { if (currUrl != "#" && currUrl != "" && currUrl != "1") { var t = window.location.href.split("#"); if (t.length > 0) { for (var s = 1; s < t.length; s++) { if ($.trim(t[s]) != "") { currUrl = $.trim(t[s]); break } } t = t[0] } window.location = t + "#" + currUrl } } } function p(e) { if ($("#pnl_chat_popup").length > 0) { if (i != "desktop") { $("#pnl_icons, #pnl_options").hide() } try { appRemote_Config.categoryId = e[0]; var t = e[1].split("&appId="); if (t.length == 2) { appRemote_Config.categoryName = t[0]; t = t[1].split("&name="); if (t[0].indexOf("app-") == -1) { $("#pnl_chat_users").hide(); try { chatClient.BuildChatWindowMobile(t[0]); $("#Category-Back-ChatRemote-Close").find("h4").html("Close " + t[1] + " Chat Session") } catch (n) { } } else { appRemote_Config.categoryId = ""; appRemote_Config.categoryName = ""; d() } } else { $("#pnl_chat_popup").hide(); $("#pnl_chat_users").fadeIn(appRemote_Config.animationSpeed) } } catch (n) { } } else { w(); E(false); d() } } function d() { var e = window.location.href.split("#?"); if (e.length > 0) { e = e[0] } if (e.indexOf("#") != e.length - 1) { e += "#" } if (appRemote_Config.categoryId != "" && appRemote_Config.categoryName != "") { e += "?id=" + appRemote_Config.categoryId + "&category=" + appRemote_Config.categoryName } if (appRemote_Config.remoteId != "" && appRemote_Config.remoteName != "") { if (appRemote_Config.categoryId != "" && appRemote_Config.categoryName != "") { e += "&" } else { e += "?" } e += "appId=" + appRemote_Config.remoteId + "&name=" + appRemote_Config.remoteName } window.location = e } function v(e) { if (e.indexOf("...") != -1) { e = e.replace("...", "") } if ($("#loadoptions-selector-overlay").css("display") == "block") { $("#loadoptions-selector-overlay, #loadoptions-selector-modal").hide(); $("#loading-message").html("") } $("#loading-message").html(e); $("#loadoptions-selector-overlay, #loadoptions-selector-modal").show() } function m() { $("#loadoptions-selector-overlay, #loadoptions-selector-modal").hide(); $("#loading-message").html("") } function g(e) { if (!r) { r = true; $("#loading-message-modal").html("Switching Workspaces..."); $.ajax({ url: "WebServices/AcctSettings.asmx/UpdateAppRemote", type: "POST", data: '{ "id": "workspace-selector","options": "' + e + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (appRemote.ConvertBitToBoolean(e.d)) { $("#workspace-selector-overlay, #workspace-selector-modal").fadeOut(appRemote_Config.animationSpeed); $("#loading-message-modal").html("") } else { $("#loading-message-modal").html("<span style='color: Red;'>Error! Try again.</span>") } r = false }, error: function () { $("#loading-message-modal").html("<span style='color: Red;'>Error! Try again.</span>"); r = false } }) } } function y(e, t, n) { appRemote_Config.remoteId = e; appRemote_Config.remoteName = t; if (n) { d() } } function b(n, i) { if (!r) { if ($("#" + n + "-loadedapp").length > 0) { $("#pnl_options-minHeight").hide(); $("#" + appRemote_Config.remoteId + "-loadedapp").css({ visibility: "visible", position: "", top: "" }); $("#db-b").show(); $("#db-c").show(); $("#apps_header_btn").hide(); $("#chat_header_btn").hide(); $("#pnl_options").show(); $("#pnl_icons").hide(); return } else { $("#pnl_options-minHeight").show(); $("#load-option-text").html("<b>" + appRemote_Config.remoteName + "</b> Load Options <span class='img-menudropdown' style='float: right!important; margin-right: 3px!important; margin-top: 2px!important;'></span>") } r = true; var s = setTimeout(function () { v("Loading Options...") }, 1500); $.ajax({ url: "WebServices/AcctSettings.asmx/GetAppRemoteProps", type: "POST", data: '{ "appId": "' + n + '" }', contentType: "application/json; charset=utf-8", success: function (i) { clearTimeout(s); m(); if (appRemote.IsComplexWorkspaceMode()) { $("#options-btn-open").show() } $("#options-btn-update").hide(); $("#pnl_appMoveResize").hide(); if (i.d[0].length == 16) { var o = i.d[0][0]; var u = i.d[0][1]; var a = i.d[0][2]; var f = i.d[0][3]; var l = i.d[0][4]; var c = i.d[0][5].replace("px", ""); var h = i.d[0][6].replace("px", ""); var p = i.d[0][7].replace("px", ""); var d = i.d[0][8].replace("px", ""); var v = i.d[0][9].replace("px", ""); var g = i.d[0][10].replace("px", ""); var y = i.d[0][11]; var b = i.d[0][12]; var w = i.d[0][13]; var E = i.d[0][14]; var x = i.d[0][15]; if (p == "0" || p == "") { p = g } if (d == "0" || d == "") { d = v } $(".accordion-header").each(function () { $(this).removeClass("active") }); $("#load-option-about").attr("onclick", "appRemote.AccordionClick_About('" + n + "')"); $("#load-option-about").next(".accordion-content").html(""); $("#load-option-about").next(".accordion-content").hide(); $("#load-option-stats").next(".accordion-content").html(""); $("#load-option-stats").next(".accordion-content").hide(); if (appRemote.ConvertBitToBoolean(x)) { $("#load-option-stats").attr("onclick", "appRemote.AccordionClick_Stats('" + n + "')"); $("#load-option-stats").show() } else { $("#load-option-stats").hide() } $("#load-option-text").addClass("active"); $("#load-option-text").attr("onclick", "appRemote.AccordionClick_Options('" + n + "')"); $("#load-option-text").next(".accordion-content").show(); e = g; t = v; $("#moveresize-left").val(c); $("#moveresize-top").val(h); $("#moveresize-width").val(p); $("#moveresize-height").val(d); $("#moveresize-left").spinner({ min: 0 }); $("#moveresize-top").spinner({ min: 0 }); $("#moveresize-width").spinner({ min: parseInt(g) }); $("#moveresize-height").spinner({ min: parseInt(v) }); if (appRemote.IsComplexWorkspaceMode()) { $("#app-load-options").show(); if (appRemote.ConvertBitToBoolean(o)) { $("#options-btn-close").hide() } else { $("#options-btn-close").show(); $("#options-btn-open").hide(); $("#options-btn-update").show() } } else { $("#options-btn-close").hide(); $("#options-btn-open").hide(); $("#options-btn-update").hide(); $("#app-load-options").hide() } if (f != "") { $("#ddl_appDropdownSelector").val(S(f)) } else { $("#ddl_appDropdownSelector").val(S(i.d[1])) } $("#rb_norm").prop("checked", true); if (!appRemote.ConvertBitToBoolean(o)) { $("#pnl_appMoveResize").hide(); $("#resize-div").hide(); if (!appRemote.ConvertBitToBoolean(w) && !appRemote.ConvertBitToBoolean(E)) { $("#pnl_appMoveResize").show() } else if (appRemote.ConvertBitToBoolean(E)) { $("#pnl_appMoveResize").show(); $("#resize-div").show() } if (appRemote.ConvertBitToBoolean(a)) { $("#rb_max").prop("checked", true) } if (appRemote.ConvertBitToBoolean(u)) { $("#rb_min").prop("checked", true) } } else { $("#rb_norm").prop("checked", true); $("#pnl_appMoveResize").hide() } if (l != "") { $("#last-updated").html("<b class='pad-right-sml'>Last Updated:</b>" + l) } if (appRemote.ConvertBitToBoolean(w)) { $("#div_max_rb_holder").show() } else { $("#div_max_rb_holder").hide() } $("#options-btn-device").hide(); if (appRemote.ConvertBitToBoolean(y) && b != "") { $("#options-btn-device").attr("href", b); $("#options-btn-device").show() } } else { $("#options-btn-device").hide(); $("#options-btn-close").hide(); $("#pnl_appMoveResize").hide(); $("#ddl_appDropdownSelector").val("1"); $("#rb_norm").prop("checked", true); $("#last-updated").html("") } $(document).tooltip({ disabled: true }); $("#pnl_icons").fadeOut(appRemote_Config.animationSpeed, function () { $(document).tooltip({ disabled: false }) }); $("#pnl_options").show(); r = false }, error: function () { alert("Error trying to access account. Please try again."); r = false } }) } } function w() { M(); if (appRemote.IsComplexWorkspaceMode()) { var e = setTimeout(function () { v("Loading Remote...") }, 1500); $(".app-icon").removeClass("active"); $(".workspace-reminder").each(function () { $(this).remove() }); setTimeout(function () { $.ajax({ url: "WebServices/AcctSettings.asmx/GetAllOpenedApps", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (t) { clearTimeout(e); m(); if (t.d != null) { for (var n = 0; n < t.d.length; n++) { var r = $("#" + t.d[n][0] + "-pnl-icons"); r.addClass("active"); if (t.d[n][1] != "") { var i = "<span class='workspace-reminder font-no-bold'>" + S(t.d[n][1]) + "</span>"; r.append(i) } } } } }) }, 250) } else { setTimeout(function () { clearTimeout(e); m() }, 250) } } function E(e) { appRemote_Config.remoteId = ""; appRemote_Config.remoteName = ""; $("#pnl_appMoveResize").hide(); $("#pnl_options").fadeOut(appRemote_Config.animationSpeed, function () { if (i != "desktop") { $("#pnl_chat_users, #pnl_chat_popup").hide() } $("#pnl_icons").show(); $("#rb_norm").prop("checked", true); $("#ddl_appDropdownSelector").val("1"); $("#loading-message").html(""); $("#load-option-text").html(""); if (e) { d() } }) } function S(e) { return e.replace("workspace_", "") } function x(e) { if (!$("#load-option-about").hasClass("active")) { k(); L("load-option-about"); $("#load-option-about").next(".accordion-content").html("<h4>Loading...</h4>"); $.ajax({ url: "WebServices/AcctSettings.asmx/GetAppRemoteAboutStats", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","option": "about" }', contentType: "application/json; charset=utf-8", success: function (t) { if (t.d != null) { $("#load-option-about").next(".accordion-content").html(t.d[0]); if (t.d.length == 3) { appRemote.RatingStyleInit(".app-rater", t.d[1], true, e, true); for (var n = 0; n < t.d[2].length; n++) { var i = t.d[2][n]; appRemote.RatingStyleInit($(".ratingreviews-div").eq(n)[0], i.Rating, true, i.AppID, false) } } } r = false }, error: function () { $("#load-option-about").next(".accordion-content").html("<h4>Error! Could not load.</h4>"); r = false } }) } } function T(e) { if (!$("#load-option-stats").hasClass("active")) { k(); L("load-option-stats"); $("#load-option-stats").next(".accordion-content").html("<h4>Loading...</h4>"); N(e) } } function N(e) { $.ajax({ url: "WebServices/AcctSettings.asmx/GetAppRemoteAboutStats", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","option": "stats" }', contentType: "application/json; charset=utf-8", success: function (e) { $("#load-option-stats").next(".accordion-content").html(e.d); r = false }, error: function () { $("#load-option-stats").next(".accordion-content").html("<h4>Error! Could not load.</h4>"); r = false } }) } function C(e) { if (!$("#load-option-text").hasClass("active")) { k(); L("load-option-text") } } function k() { $(".accordion-header").each(function () { $(this).removeClass("active"); $(this).next(".accordion-content").slideUp(appRemote_Config.animationSpeed) }) } function L(e) { $("#" + e).addClass("active"); setTimeout(function () { $("#" + e).next(".accordion-content").slideDown(appRemote_Config.animationSpeed) }, appRemote_Config.animationSpeed) } function A() { if (!r) { r = true; var n = ""; var i = false; n += $("#ddl_appDropdownSelector").val() + ";"; if ($("#rb_max").is(":checked")) { n += "maximize;"; i = true } else if ($("#rb_min").is(":checked")) { n += "minimize;" } else { n += "normal;" } var s = parseInt($("#moveresize-top").val()); var o = parseInt($("#moveresize-left").val()); if (s < 0 || s == null || s.toString() == "NaN" && s != null) { s = 0 } if (o < 0 || o == null || o.toString() == "NaN" && o != null) { o = 0 } var u = parseInt($("#moveresize-width").val()); var a = parseInt($("#moveresize-height").val()); if (u < e || u == null || u.toString() == "NaN" && u != null) { u = e } if (a < t || a == null || a.toString() == "NaN" && a != null) { a = t } n += s + ";" + o + ";" + u + ";" + a + ";"; if ($("#options-btn-update").css("display") == "block") { v("Refreshing App...") } else { v("Loading App...") } $.ajax({ url: "WebServices/AcctSettings.asmx/UpdateAppRemote", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","options": "' + escape(n) + '" }', contentType: "application/json; charset=utf-8", success: function (e) { r = false; if (appRemote.ConvertBitToBoolean(e.d)) { m(); if (appRemote_Config.backOnAction) { E(true) } else { setTimeout(function () { b(appRemote_Config.remoteId, appRemote_Config.remoteName) }, 250) } } else { $("#loading-message").html("<span style='color: Red;'>Could not load! Try again.</span>"); setTimeout(function () { m() }, appRemote_Config.closeTimeout) } }, error: function () { $("#loading-message").html("<span style='color: Red;'>Could not load! Try again.</span>"); setTimeout(function () { m() }, appRemote_Config.closeTimeout); r = false } }) } } function O() { var e = $("#" + appRemote_Config.remoteId + "-loadedapp"); if (e.length > 0) { e.remove() } $("#pnl_options-minHeight").hide(); var t = $("#options-btn-device").attr("href"); if (t.toLowerCase().indexOf("externalappholder.aspx?appid") > 0) { t += "&hidetoolbar=true" } var n = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + $("#notifications").outerHeight())); $("#db-b").show(); $("#db-c").show(); $("#apps_header_btn").hide(); $("#chat_header_btn").hide(); $("#" + appRemote_Config.remoteId + "-pnl-icons").find(".app-icon-font").addClass("mobile-open"); $("#pnl_options").append("<div class='loading-background-holder'></div>"); $("#pnl_options").append("<iframe id='" + appRemote_Config.remoteId + "-loadedapp' src='" + t + "' frameborder='0' class='loaded-app-holder' style='height: " + n + "px;'></iframe>"); $(".loaded-app-holder").one("load", function () { $(".loading-background-holder").remove() }) } function M() { var e = -($("#" + appRemote_Config.remoteId + "-loadedapp").outerHeight() * 2); $("#" + appRemote_Config.remoteId + "-loadedapp").css({ visibility: "hidden", position: "absolute", top: e }); $("#db-b").hide(); $("#db-c").hide(); $("#apps_header_btn").show(); $("#chat_header_btn").show() } function _() { if (!r) { r = true; v("Closing App..."); $.ajax({ url: "WebServices/AcctSettings.asmx/UpdateAppRemote", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","options": "' + "close" + '" }', contentType: "application/json; charset=utf-8", success: function (e) { r = false; if (appRemote.ConvertBitToBoolean(e.d)) { m(); E(true); w() } else { $("#loading-message").html("<span style='color: Red;'>Error! Try again.</span>"); setTimeout(function () { m() }, appRemote_Config.closeTimeout) } }, error: function () { $("#loading-message").html("<span style='color: Red;'>Error! Try again.</span>"); setTimeout(function () { m() }, appRemote_Config.closeTimeout); r = false } }) } } function D(e) { if (e) { n = true } $("#pnl_icons").sortable({ axis: "y", cancel: ".app-icon-category-list, #Category-Back, #notifications", containment: "#pnl_icons", opacity: .6, scrollSensitivity: 40, scrollSpeed: 40, start: function (e, t) { $(document).tooltip({ disabled: true }) }, stop: function (e, t) { var r = ""; $(".app-icon").each(function () { var e = $(this).attr("id").replace("-pnl-icons", ""); if (e != "") { r += e + "," } }); if (n) { $.ajax({ url: "WebServices/SaveControls.asmx/App_UpdateIcons", type: "POST", data: '{ "appList": "' + escape(r) + '" }', contentType: "application/json; charset=utf-8" }) } $(document).tooltip({ disabled: false }) } }); $("#pnl_icons").disableSelection() } function P(e, t, n) { appRemote_Config.categoryId = e; appRemote_Config.categoryName = t; $(".app-icon-category-list").hide(); $("#Category-Back").fadeIn(appRemote_Config.animationSpeed); $("." + appRemote_Config.categoryId).fadeIn(appRemote_Config.animationSpeed); $("#Category-Back-Name").html(appRemote_Config.categoryName); $("#Category-Back-Name-id").html(appRemote_Config.categoryId); if (n) { d() } } function H(e) { appRemote_Config.categoryId = ""; appRemote_Config.categoryName = ""; appRemote_Config.remoteId = ""; appRemote_Config.remoteName = ""; var t = $("#Category-Back-Name-id").html(); $("#Category-Back").fadeOut(appRemote_Config.animationSpeed); if (t != "" && t != undefined && t != null) { if ($("." + t).length > 0) { $("." + t).fadeOut(appRemote_Config.animationSpeed, function () { $(".app-icon-category-list").show(); $("#Category-Back-Name").html(""); $("#Category-Back-Name-id").html("") }) } } else { if ($("#pnl_chat_users").css("display") == "block") { $("#pnl_chat_users").hide() } if ($("#pnl_options").css("display") == "block") { $("#pnl_options").hide() } if ($("#pnl_icons").css("display") == "none") { $("#pnl_icons").fadeIn(appRemote_Config.animationSpeed) } $(".app-icon-category-list").show(); $("#Category-Back-Name").html(""); $("#Category-Back-Name-id").html("") } if (e) { d() } } function q() { if (!B) { B = true; $.ajax({ url: "WebServices/NotificationRetrieve.asmx/CheckForNewNotifications", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (e) { var t = parseInt(e.d); $("#notifications").find("#total-noti").html(t); if (t == 0) { $("#notifications").removeClass("has-notifications").addClass("no-notifications") } else { $("#notifications").removeClass("no-notifications").addClass("has-notifications") } B = false; setTimeout(function () { q() }, appRemote_Config.notiInterval) }, error: function () { B = false; setTimeout(function () { q() }, appRemote_Config.notiInterval) } }) } } function R(e) { if (!j) { j = true; if ($(".ddLoadingMessage").length == 0) { if (e) { $(".table-notiMessages-div").prepend(I) } } var t = new Array; $("#table_NotiMessages tr").each(function (e) { t[e] = $(this).attr("id") }); var n = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/LoadUserNotifications"; $.ajax({ url: n, type: "POST", data: '{ "_currIds": "' + t + '","siteTheme": "' + appRemote_Config.siteTheme + '" }', contentType: "application/json; charset=utf-8", success: function (e) { $(".ddLoadingMessage").remove(); if (e.d != null && e.d != "") { $("#NotificationHolder").html($.trim(e.d)); if ($("#no-notifications-id").length > 0) { $("#lb_clearNoti").hide() } else { $("#lb_clearNoti").show() } } else { $("#lb_clearNoti").hide() } j = false; W(); z() }, error: function () { $(".ddLoadingMessage").remove(); W(); $("#NotificationHolder").html("<h3 class='pad-top-big pad-bottom-big' style='color: Red; text-align: center;'>Error retrieving notifications!</h3>"); $("#lb_clearNoti").hide(); j = false } }) } } function U() { if (!F && !j) { F = true; var e = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/LoadMoreUserNotifications"; var t = new Array; $("#table_NotiMessages tr").each(function (e) { t[e] = $(this).attr("id") }); $.ajax({ url: e, type: "POST", data: '{ "_currIds": "' + t + '","_currCount": "' + parseInt($("#table_NotiMessages tr").length) + '","siteTheme": "' + appRemote_Config.siteTheme + '" }', contentType: "application/json; charset=utf-8", success: function (e) { $(".ddLoadingMessage").remove(); if (e.d != null && e.d != "") { $("#table_NotiMessages").append($.trim(e.d)) } W(); F = false; z() }, error: function () { $(".ddLoadingMessage").remove(); W(); $("#NotificationHolder").append("<h3 class='pad-bottom-big' style='color: Red; text-align: center;'>Error retrieving notifications!</h3>"); F = false } }) } } function z() { var e = document.getElementById("notifications-viewtable"); if (e != null) { var t = $("#notifications-viewtable").innerHeight(); var n = $("#notifications-viewtable").outerHeight(); if (t >= e.scrollHeight || e.scrollHeight < n) { var r = parseInt($("#notifications").find("#total-noti").html()); var i = parseInt($("#table_NotiMessages tr").length); if (i < r) { $(".ddLoadingMessage").remove(); $("#NotificationHolder").append(I); U() } } } } function W() { $("#notifications-viewtable").scroll(function () { var e = document.getElementById("notifications-viewtable"); if (e != null) { var t = $("#notifications-viewtable"); var n = t.scrollTop(); if (n > 0) { if (n + t.height() >= e.scrollHeight) { var r = parseInt($("#notifications").find("#total-noti").html()); var i = parseInt($("#table_NotiMessages tr").length); if (i < r) { $(".ddLoadingMessage").remove(); $("#NotificationHolder").append(I); U() } } } } }) } function X() { v("Clearing..."); var e = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/DeleteNotifications"; $.ajax({ url: e, type: "POST", data: '{ "id": "' + "ClearAll" + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (appRemote.ConvertBitToBoolean(e.d)) { m(); V() } } }) } function V() { $("#notifications").find("#total-noti").html("0"); $("#notifications").removeClass("has-notifications").addClass("no-notifications"); var e = window.location.href.split("#?"); if (e.length > 0) { e = e[0] } if (e.indexOf("#") != e.length - 1) { e += "#" } if (appRemote_Config.categoryId != "" && appRemote_Config.categoryName != "") { e += "?id=" + appRemote_Config.categoryId + "&category=" + appRemote_Config.categoryName } if (appRemote_Config.remoteId != "" && appRemote_Config.remoteName != "") { if (appRemote_Config.categoryId != "" && appRemote_Config.categoryName != "") { e += "&" } else { e += "?" } e += "appId=" + appRemote_Config.remoteId + "&name=" + appRemote_Config.remoteName } window.location = e } function J() { $("#NotificationHolder").html(""); j = false; R(true) } function K() { if ($("#Login-holder").css("display") != "none") { $("#Login-holder").hide(); $("#iframe-createaccount-holder").html("<iframe id='iframe-demo' src='SiteSettings/iframes/CreateAccount.aspx' frameborder='0' width='100%' style='visibility: hidden;'></iframe>"); $("#iframe-createaccount-holder").append("<div style='text-align: center;'><h3 id='loadingControls'>Loading Controls. Please Wait...</h3></div>"); $("#CreateAccount-holder").show(); $("#iframe-demo").load(function () { $("#loadingControls").remove(); $("#iframe-demo").css({ height: "400px", visibility: "visible" }) }) } else { $("#CreateAccount-holder, #ForgotPassword-holder").hide(); $("#iframe-createaccount-holder").html(""); $("#Login-holder").show() } } function Q() { if ($("#ForgotPassword-holder").css("display") != "block") { $("#tb_username_recovery").val(""); $("#lbl_passwordResetMessage").html(""); $("#UserNameRequired_recovery").css("visibility", "hidden"); $("#Login-holder").hide(); $("#ForgotPassword-holder").show() } else { $("#ForgotPassword-holder").hide(); $("#Login-holder").show() } } function G(e, t, n, r, i) { try { var s = false; if (n) { s = true } var o = openWSE.siteRoot() + "App_Themes/Standard"; $(e).attr("data-average", t); $(e).attr("data-id", "1"); var u = "big"; if (!i) { u = "small" } $(e).jRating({ step: true, type: u, showRateInfo: false, canRateAgain: true, nbRates: 100, bigStarsPath: o + "/Icons/star-rating-lrg.png", smallStarsPath: o + "/Icons/star-rating-sml.png", isDisabled: s, decimalLength: 2, length: 4, rateMax: 4, rateMin: 0, sendRequest: true }); if (!i) { $(e).find(".jStar").addClass("jStar-Small") } } catch (a) { } } var e = 0; var t = 0; var n = false; var r = false; var i = ""; $(document.body).on("click", "#db-b", function () { appRemote.HideApp(); $("#Category-Back-options").trigger("click") }); $(document.body).on("click", "#db-c", function () { $("#pnl_options").find("#" + appRemote_Config.remoteId + "-loadedapp").remove(); $("#db-b").hide(); $("#db-c").hide(); $(".loading-background-holder").remove(); $("#apps_header_btn").show(); $("#chat_header_btn").show(); $("#" + appRemote_Config.remoteId + "-pnl-icons").find(".app-icon-font").removeClass("mobile-open"); $("#load-option-text").html("<b>" + appRemote_Config.remoteName + "</b> Load Options <span class='img-menudropdown' style='float: right!important; margin-right: 3px!important; margin-top: 2px!important;'></span>"); $("#pnl_options-minHeight").show() }); $(document.body).on("click", "#db-s", function () { if (!r) { $("#loading-message-modal").html(""); if ($("#workspace-selector-overlay").css("display") == "none" || $("#workspace-selector-modal").css("display") == "none") { r = true; var e = setTimeout(function () { v("Getting Current...") }, 1500); $.ajax({ url: "WebServices/AcctSettings.asmx/GetCurrentWorkspace_Remote", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (t) { r = false; clearTimeout(e); m(); if (t.d != "") { $("#dropdownSelector").val(t.d) } $("#workspace-selector-overlay, #workspace-selector-modal").fadeIn(appRemote_Config.animationSpeed) }, error: function () { $("#loading-message").html("<span style='color: Red;'>Error! Try again.</span>"); setTimeout(function () { m() }, appRemote_Config.closeTimeout); r = false } }) } else { $("#workspace-selector-overlay, #workspace-selector-modal").fadeOut(appRemote_Config.animationSpeed) } } }); $(document.body).on("click", "#cc-s", function () { $("#workspace-selector-overlay, #workspace-selector-modal").fadeOut(appRemote_Config.animationSpeed); if (!$("#pnl_chat_users").is(":visible")) { $("#pnl_icons, #pnl_appMoveResize").hide(); if (i != "desktop") { appRemote_Config.categoryId = "chatClient"; appRemote_Config.categoryName = "userSelect"; appRemote_Config.remoteId = ""; appRemote_Config.remoteName = ""; d() } $("#pnl_chat_users").fadeIn(appRemote_Config.animationSpeed) } }); $(document.body).on("click", "#wl-s", function () { $("#pnl_chat_users, #pnl_options, #pnl_chat_popup, #pnl_appMoveResize").hide(); appRemote_Config.categoryId = ""; appRemote_Config.categoryName = ""; appRemote_Config.remoteId = ""; appRemote_Config.remoteName = ""; d(); $("#pnl_icons").fadeIn(appRemote_Config.animationSpeed) }); $(document.body).on("click", "#workspace-selector-overlay", function () { if (!r) { if ($("#workspace-selector-overlay").css("display") != "none" || $("#workspace-selector-modal").css("display") != "none") { $("#loading-message-modal").html(""); $("#workspace-selector-overlay, #workspace-selector-modal").fadeOut(appRemote_Config.animationSpeed) } } }); $(document.body).on("keydown", "#moveresize-top, #moveresize-left, #moveresize-width, #moveresize-height", function (e) { try { if (e.which == 13) { e.preventDefault(); A(); return false } } catch (t) { if (e.keyCode == 13) { e.preventDefault(); A(); return false } delete t } }); $(document.body).on("change", "#dropdownSelector", function () { g($(this).val()) }); $(document.body).on("click", "#Category-Back", function () { H(true) }); $(document.body).on("click", "#Category-Back-options", function () { w(); E(true) }); $(document.body).on("click", "#Category-Back-moveresize", function () { $("#pnl_appMoveResize").hide(); $("#pnl_options").fadeIn(appRemote_Config.animationSpeed) }); $(document.body).on("click", "#Category-Back-ChatRemote-Close", function () { $("#pnl_chat_popup").hide(); $(".iFrame-chat").each(function () { $(this).remove() }); if (i != "desktop") { appRemote_Config.categoryId = "chatClient"; appRemote_Config.categoryName = "userSelect"; appRemote_Config.remoteId = ""; appRemote_Config.remoteName = ""; d() } $("#pnl_chat_users").fadeIn(appRemote_Config.animationSpeed) }); $(document.body).on("click", "#notifications", function () { if ($(this).hasClass("has-notifications")) { var e = "?"; var t = window.location.href.split("#?"); if (t.length > 0) { t = t[0] } if (t.indexOf("#") != t.length - 1) { t += "#" } if (appRemote_Config.categoryId != "" && appRemote_Config.categoryName != "") { t += "?id=" + appRemote_Config.categoryId + "&category=" + appRemote_Config.categoryName; e = "&" } if (appRemote_Config.remoteId != "" && appRemote_Config.remoteName != "") { if (appRemote_Config.categoryId != "" && appRemote_Config.categoryName != "") { t += "&" } else { t += "?" } t += "appId=" + appRemote_Config.remoteId + "&name=" + appRemote_Config.remoteName; e = "&" } if ($("#notifications-viewtable").css("display") != "block") { window.location = t + e + "notiOn=true" } else { window.location = t } } }); var B = false; var j = false; var F = false; var I = "<div class='ddLoadingMessage'><h3>Loading Notifications. Please Wait...</h3></div>"; return { init: u, ConvertBitToBoolean: s, IsComplexWorkspaceMode: o, SetWindowMode: a, StartLoadingOverlay: v, CloseStartLoadingOverlay: m, GetAllOpenedApps: w, AppsSortUnlocked: D, LoadOptions: y, load: h, CategoryClick: P, OnWorkspaceClick: g, AccordionClick_Options: C, AccordionClick_About: x, AccordionClick_Stats: T, AppStats: N, OpenApp: A, LoadApp: O, HideApp: M, CloseApp: _, ResetControls: E, RefreshNotifications: J, CheckForNewNotifications: q, NotiActionsClearAll: X, ResetNoti: V, UpdateURL: d, LoadCreateAccountHolder: K, LoadRecoveryPassword: Q, RatingStyleInit: G } }(); var openWSE = function () { return { NotiActionsHideInd: function (e) { appRemote.StartLoadingOverlay("Deleting..."); var t = $(e).closest("tr"); var n = t.attr("id"); var r = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/DeleteNotifications"; $.ajax({ url: r, type: "POST", data: '{ "id": "' + n + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (appRemote.ConvertBitToBoolean(e.d)) { t.fadeOut(appRemote_Config.animationSpeed, function () { appRemote.CloseStartLoadingOverlay(); t.remove(); if ($("#notifications").find("#total-noti").html() == "1") { appRemote.ResetNoti() } else { var e = parseInt($("#notifications").find("#total-noti").html()); e -= 1; $("#notifications").find("#total-noti").html(e) } }) } } }) }, AcceptGroupNotification: function (e, t) { appRemote.StartLoadingOverlay("Accepting..."); var n = $(e).closest("tr"); var r = n.attr("id"); var i = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/AcceptInviteNotifications"; $.ajax({ url: i, type: "POST", data: '{ "id": "' + r + '", "groupId": "' + t + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (appRemote.ConvertBitToBoolean(e.d)) { n.fadeOut(appRemote_Config.animationSpeed, function () { appRemote.CloseStartLoadingOverlay(); n.remove(); if ($("#notifications").find("#total-noti").html() == "1") { appRemote.ResetNoti() } else { var e = parseInt($("#notifications").find("#total-noti").html()); e -= 1; $("#notifications").find("#total-noti").html(e) } }) } } }) }, siteRoot: function () { var e = ""; if (appRemote_Config.siteRootFolder != "") { e = appRemote_Config.siteRootFolder + "/" } return window.location.protocol + "//" + window.location.host + "/" + e } } }(); $(document).ready(function () { appRemote.StartLoadingOverlay("Loading Remote..."); appRemote.init(); var e = window.location.href.split("#"); if (e.length == 1) { window.location += "#" } var t = 0; if ($("#notifications").length > 0 && $("#notifications").css("display") != "none") { $("#notifications").css("top", $("#always-visible").outerHeight()); t = $("#notifications").outerHeight() } $("#pnl_chat_popup, #pnl_chat_users, #pnl_icons, #pnl_login, #pnl_options, #notifications-viewtable").css({ top: $("#always-visible").outerHeight() + t, bottom: $("#container-footer").outerHeight() }); appRemote.GetAllOpenedApps(); var n = location.hash; appRemote.load(n == "" ? "1" : n) }); $(function () { $(window).hashchange(function () { var e = location.hash; appRemote.load(e == "" ? "1" : e) }) }); $(window).resize(function () { appRemote.SetWindowMode(); if ($(".iFrame-chat").length > 0) { var e = $(window).height(); var t = $("#Category-Back-ChatRemote-Close").height() + 16; var n = $("#always-visible").height(); var r = $("#container-footer").height(); var i = $("#notifications").height(); var s = e - (t + n + r + i); $(".iFrame-chat").height(s) } $(".loaded-app-holder").each(function () { var e = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + $("#notifications").outerHeight())); $(this).css({ height: e }) }) });