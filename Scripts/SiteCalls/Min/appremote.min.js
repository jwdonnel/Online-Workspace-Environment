// -----------------------------------------------------------------------------------
//
//	appRemote v4.1
//	by John Donnelly
//	Last Modification: 4/20/2015
//
//	Licensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/
//  	- Free for use in both personal and commercial projects
//		- Attribution requires leaving author name, author link, and the license info intact.
//
//  Requirements:
//      jquery v1.11.0 - http://code.jquery.com/jquery-1.11.1.min.js
//      migrate.jquery.min.js - http://code.jquery.com/jquery-migrate-1.2.1.min.js
//
// -----------------------------------------------------------------------------------
var appRemote_Config = { animationSpeed: 150, closeTimeout: 2e3, remoteId: "", remoteName: "", categoryId: "", categoryName: "", currUrl: "", workspaceMode: "", notiInterval: 7e3, siteTheme: "Standard", siteRootFolder: "", forceGroupLogin: !1 }, appRemote = function () {
    function e() { var e = 0; return $("#top-btns-holder").find("div").each(function () { $(this).is(":visible") && (e += $(this).outerHeight()) }), e } function o(e) { if (null != e && void 0 != e) { var o = $.trim(e.toString().toLowerCase()); if ("true" != o && "false" != o && "0" != o && "1" != o && "" != o) return !0; if ("1" == o || "true" == o || "" == o) return !0; if ("0" == o || "false" == o) return !1 } return !1 } function t() { return "complex" == appRemote_Config.workspaceMode.toLowerCase() || "" == appRemote_Config.workspaceMode ? !0 : !1 } function i(e, o, t) { appRemote_Config.categoryId = e, appRemote_Config.categoryName = o, $(".app-icon-category-list").hide(), $("#Category-Back").show(), $("." + appRemote_Config.categoryId).show(), $("#Category-Back-Name").html(appRemote_Config.categoryName), $("#Category-Back-Name-id").html(appRemote_Config.categoryId), t && S() } function a(e) { appRemote_Config.categoryId = "", appRemote_Config.categoryName = "", appRemote_Config.remoteId = "", appRemote_Config.remoteName = ""; var o = $("#Category-Back-Name-id").html(); $("#Category-Back").hide(), "" != o && void 0 != o && null != o ? $("." + o).length > 0 && ($("." + o).hide(), $(".app-icon-category-list").show(), $("#Category-Back-Name").html(""), $("#Category-Back-Name-id").html("")) : ("block" == $("#pnl_chat_users").css("display") && $("#pnl_chat_users").hide(), "block" == $("#pnl_options").css("display") && $("#pnl_options").hide(), "block" == $("#pnl_adminPages").css("display") && $("#pnl_adminPages").hide(), "none" == $("#pnl_icons").css("display") && $("#pnl_icons").show(), $(".app-icon-category-list").show(), $("#Category-Back-Name").html(""), $("#Category-Back-Name-id").html("")), e && S() } function n() { x("Please Wait"), $.ajax({ url: "WebServices/AcctSettings.asmx/GetUserGroups", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (e) { var o = ""; try { for (var t = 0; t < e.d[0].length; t++) { var i = e.d[0][t][0], a = e.d[0][t][1], n = e.d[0][t][2], s = e.d[0][t][3], r = e.d[0][t][4], p = "style=\"background: url('" + r + "'); background-size: cover;\""; o += "<div class='group-selection-entry' onclick='appRemote.LoginAsGroup(\"" + i + "\")' title='Click to login' " + p + ">", o += "<div class='overlay'></div>", o += "<div class='group-selection-info'>", o += "<div class='group-name-info'>", o += "<span class='group-name'>" + a + "</span><div class='clear-space-five'></div>", o += "<span class='group-info'><b class='pad-right-sml'>Owner:</b>" + s + "</span>", o += "</div>", o += "<img class='group-img' alt='Group Logo' src='" + n + "' />", o += "</div></div>" } appRemote.ConvertBitToBoolean(e.d[1]) && (o += "<div class='logingroupselector-logout' onclick='appRemote.LoginAsGroup(\"\")'>", o += "<div>Log Out of Group</div>", o += "</div>"), o += "<div class='clear-space'></div>" } catch (l) { } $("#group-list").html(o), I() } }) } function s(e) { x("Please Wait"), $.ajax({ url: "WebServices/AcctSettings.asmx/LoginUnderGroup", type: "POST", data: '{ "id": "' + e + '" }', contentType: "application/json; charset=utf-8", success: function (o) { window.location = "true" == o.d ? "AppRemote.aspx" : "AppRemote.aspx?group=" + e }, error: function () { I() } }) } function r() { d(), m(), p() } function p() { $("#pnl_adminPages").length > 0 && $("#pnl_adminPages").find(".app-icon-links, .app-icon-sub-links").each(function () { var e = $(this).attr("href"); e += e.indexOf("?") > 0 ? "&mobileMode=true" : "?mobileMode=true", $(this).attr("onclick", "appRemote.LoadAdminPage('" + e + "');return false;"), $(this).attr("href", "#") }) } function l() { $("#db-s").remove(), io = !0, appRemote_Config.categoryId = "adminPages", appRemote_Config.categoryName = "pageSelect", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S() } function c() { $("#db-s").remove(), $("#notifications").remove(), $("#pnl_login").hide(), $("#app-load-options").remove(), $("#load-option-about").next(".accordion-content").remove(), $("#load-option-about").remove(), ao = !0, h() } function d() { if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) { var e = document.getElementsByTagName("head")[0]; meta = document.createElement("meta"), meta.name = "viewport", meta.id = "mobileViewport", meta.content = "initial-scale=0.90, user-scalable=no", e.appendChild(meta) } else $("#mobileViewport").length > 0 && $("#mobileViewport").remove() } function m() { appRemote_Config.forceGroupLogin || (appRemote.IsComplexWorkspaceMode() ? ao || io || $.ajax({ url: "WebServices/AcctSettings.asmx/CanConnectToWorkspace", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (e) { no = "simple" == e.d ? !1 : appRemote.ConvertBitToBoolean(e.d) ? !0 : !1, h() }, error: function () { no = !1, h() } }) : ($("#db-s").remove(), no = !0)) } function g() { if (ao || io || (no ? $("#tryconnect").hide() : $("#tryconnect").show()), $("#pnl_adminPages, #pnl_adminPage_iframe, #pnl_chat_popup, #pnl_chat_users, #pnl_icons, #pnl_login, #pnl_options, #notifications-viewtable, #grouplogin-list").css({ top: $("#always-visible").outerHeight() + e(), bottom: $("#container-footer").outerHeight() }), $(".iFrame-chat").length > 0) { var o = $(window).height(), t = $("#always-visible").height(), i = $("#container-footer").height(), a = o - (t + i + e()); $(".iFrame-chat").height(a - 7) } $(".loaded-app-holder").each(function () { if ("hidden" != $(this).css("visibility")) { var o = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + e())); $(this).css({ height: o }) } }) } function h() { if (to) { if ("#" != currUrl && "" != currUrl && "1" != currUrl) { var e = window.location.href.split("#"); if (e.length > 0) { for (var o = 1; o < e.length; o++) if ("" != $.trim(e[o])) { currUrl = $.trim(e[o]); break } e = e[0] } window.location = e + "#" + currUrl } } else if (currUrl = window.location.hash, f(), g(), appRemote_Config.forceGroupLogin) $("#grouplogin-list").show(), n(); else if ("" == currUrl) $("#pnl_login").length > 0 && 0 == $("#pnl_icons").length ? $("#pnl_login").show() : ($("#pnl_icons").show(), P(), a(!1)); else if (-1 != currUrl.indexOf("loginPnl=true")) $("#pnl_login").show(), $("#pnl_icons").hide(); else if (-1 != currUrl.indexOf("notiOn=true")) $("#apps_header_btn, #chat_header_btn, #pages_header_btn, #login_header_btn").hide(), $("#db-c").show(), G(!0), $("#notifications-viewtable").show(); else if (-1 != currUrl.indexOf("groupLogin=true")) $("#apps_header_btn, #chat_header_btn, #pages_header_btn, #login_header_btn").hide(), $("#db-c").show(), n(), $("#grouplogin-list").show(); else if ($("#pnl_login").length > 0 && 0 == $("#pnl_icons").length) $("#pnl_login").show(); else { var t = k("id"), i = k("category"), s = k("appId"), r = k("name"); appRemote_Config.categoryId = t, appRemote_Config.categoryName = i, appRemote_Config.remoteId = s, appRemote_Config.remoteName = r, "chatClient" == t ? C(i, s, r) : "adminPages" == t ? u(t, i) : R(t, i, s, r) } } function f() { I(), $(".loaded-app-holder").each(function () { var e = $(this).attr("id"); null != e && void 0 != e && "" != e && $(this).css({ visibility: "hidden", height: 1, position: "absolute", top: -($(window).height() + 1) }) }), $("#notifications-viewtable, #grouplogin-list").hide(), $("#NotificationHolder").html(""), $("#group-list").html(""), $("#loading-message-modal").html(""), $(".loading-background-holder").remove(), "adminPages" == appRemote_Config.categoryId && "pageSelect" == appRemote_Config.categoryName || "adminPages" != appRemote_Config.categoryId ? ($("#pnl_adminPage_iframe").html(""), $("#pnl_adminPage_iframe").hide()) : $("#pnl_adminPage_iframe").css("visibility", "hidden"), $("#pnl_icons, #pnl_options, #pnl_chat_users, #pnl_chat_popup, #pnl_appMoveResize, #pnl_adminPages, #workspace-selector-overlay, #workspace-selector-modal").hide(), $("#rb_norm").prop("checked", !0), $("#ddl_appDropdownSelector").val("1"), $("#loading-message").html(""), $("#load-option-text").html(""), $("#apps_header_btn").show(), $("#chat_header_btn").show(), $("#pages_header_btn").show(), $("#login_header_btn").hide(), $("#db-b").hide(), $("#db-c").hide(), io && "adminPages" != appRemote_Config.categoryId && l(), $("#pnl_login").length > 0 && ($("#pnl_login").hide(), $("#login_header_btn").show()), no ? $("#db-s").show() : $("#db-s").hide() } function u(e, o) { $("#pnl_adminPages").length > 0 && ("pageSelect" == o ? ($("#pnl_adminPage_iframe").hide(), $("#pnl_adminPage_iframe").html(""), $("#pnl_adminPages").show()) : (_(), "" == $.trim($("#pnl_adminPage_iframe").html()) ? b(o) : $("#pnl_adminPage_iframe").css("visibility", "visible"))) } function _() { $("#pnl_adminPages, #pnl_icons, #pnl_chat_users, #pnl_options, #pnl_chat_popup, #pnl_appMoveResize, #apps_header_btn, #chat_header_btn, #pages_header_btn, #login_header_btn").hide(), $("#db-c").show() } function v(e) { (void 0 === window.event || !$(window.event.target).hasClass("img-expand-sml") && !$(window.event.target).hasClass("img-collapse-sml")) && (appRemote_Config.categoryId = "adminPages", appRemote_Config.categoryName = escape(e), appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S()) } function b(o) { var t = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + e())); $("#pnl_adminPage_iframe").html("<div class='loading-background-holder'></div><iframe src='" + unescape(o) + "' frameborder='0' class='loaded-app-holder' style='height: " + t + "px;'></iframe>"), $("#pnl_adminPage_iframe").show(), $("#pnl_adminPage_iframe").css("visibility", "visible"), $(".loaded-app-holder").one("load", function () { $(".loading-background-holder").remove() }) } function C(e, o, t) { $("#pnl_chat_users").length > 0 && ("" != o ? y(o, t) : "userSelect" == e && $("#pnl_chat_users").show()) } function y(e, o) { if ($("#pnl_chat_popup").length > 0) if (appRemote_Config.remoteId = e, appRemote_Config.remoteName = o, -1 == e.indexOf("app-")) { $("#pnl_chat_users").hide(); try { chatClient.BuildChatWindowMobile(e), $("#apps_header_btn, #chat_header_btn, #pages_header_btn, #db-b").hide(), $("#db-c").show() } catch (t) { } } else $("#pnl_chat_users").show(), appRemote_Config.categoryId = "chatClient", appRemote_Config.categoryName = "userSelect", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S() } function R(e, o, t, n) { $("#pnl_icons").show(), P(), "" != e && "" != o ? i(e, o, !1) : "" == t && a(!1), "" != t && ($("#apps_header_btn, #chat_header_btn, #pages_header_btn").hide(), $("#db-c").show(), T(t, n)) } function w(e, o, t) { appRemote_Config.remoteId = e, appRemote_Config.remoteName = o, t && S() } function S() { var e = window.location.href.split("#?"); e.length > 0 && (e = e[0]), e.indexOf("#") != e.length - 1 && (e += "#"), "" != appRemote_Config.categoryId && "" != appRemote_Config.categoryName && (e += "?id=" + appRemote_Config.categoryId + "&category=" + appRemote_Config.categoryName), "" != appRemote_Config.remoteId && "" != appRemote_Config.remoteName && (e += "" != appRemote_Config.categoryId && "" != appRemote_Config.categoryName ? "&" : "?", e += "appId=" + appRemote_Config.remoteId + "&name=" + appRemote_Config.remoteName), window.location = e } function k(e) { e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]"); var o = "[\\?&]" + e + "=([^&#]*)", t = new RegExp(o), i = window.location.href.replace("#", ""), a = t.exec(i); return null == a ? "" : decodeURIComponent(a[1].replace(/\+/g, " ")) } function x(e) { -1 != e.indexOf("...") && (e = e.replace("...", "")), "block" == $("#loadoptions-selector-overlay").css("display") && ($("#loadoptions-selector-overlay, #loadoptions-selector-modal").hide(), $("#loading-message").html("")), $("#loading-message").html(e), $("#loadoptions-selector-overlay, #loadoptions-selector-modal").show() } function I() { $("#loadoptions-selector-overlay, #loadoptions-selector-modal").hide(), $("#loading-message").html("") } function N(e) { to || (to = !0, $("#loading-message-modal").html("Switching Workspaces..."), $.ajax({ url: "WebServices/AcctSettings.asmx/UpdateAppRemote", type: "POST", data: '{ "id": "workspace-selector","options": "' + e + '" }', contentType: "application/json; charset=utf-8", success: function (e) { appRemote.ConvertBitToBoolean(e.d) ? ($("#workspace-selector-overlay, #workspace-selector-modal").hide(), $("#loading-message-modal").html("")) : ($("#loading-message-modal").html("<span style='color: Red;'>Error! Try again.</span>"), no && (no = !1, h())), to = !1 }, error: function () { $("#loading-message-modal").html("<span style='color: Red;'>Error! Try again.</span>"), no && (no = !1, h()), to = !1 } })) } function T(o) { if (!to) { if ($("#" + o + "-loadedapp").length > 0) { $("#pnl_options-minHeight").hide(); var t = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + e())); return $("#" + appRemote_Config.remoteId + "-loadedapp").css({ visibility: "visible", position: "", top: "", height: t }), $("#db-b").show(), $("#db-c").show(), $("#apps_header_btn").hide(), $("#chat_header_btn").hide(), $("#pages_header_btn").hide(), $("#pnl_options").show(), void $("#pnl_adminPages, #pnl_icons").hide() } $("#pnl_options-minHeight").show(), $("#load-option-text").html("<b>" + appRemote_Config.remoteName + "</b> Load Options <span class='img-menudropdown' style='float: right!important; margin-right: 3px!important; margin-top: 2px!important;'></span>"), to = !0; var i = setTimeout(function () { x("Loading Options...") }, 1500); $.ajax({ url: "WebServices/AcctSettings.asmx/GetAppRemoteProps", type: "POST", data: '{ "appId": "' + o + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (clearTimeout(i), I(), appRemote.IsComplexWorkspaceMode() && $("#options-btn-open").show(), $("#options-btn-update").hide(), $("#pnl_appMoveResize").hide(), e.d.length > 0 && 15 == e.d[0].length) { var t = e.d[0][0], a = e.d[0][1], n = e.d[0][2], s = e.d[0][3], r = e.d[0][4], p = e.d[0][5].replace("px", ""), l = e.d[0][6].replace("px", ""), c = e.d[0][7].replace("px", ""), d = e.d[0][8].replace("px", ""), m = e.d[0][9].replace("px", ""), g = e.d[0][10].replace("px", ""), h = e.d[0][11], f = e.d[0][12], u = e.d[0][13], _ = e.d[0][14]; ("0" == c || "" == c) && (c = g), ("0" == d || "" == d) && (d = m), $(".accordion-header").each(function () { $(this).removeClass("active") }), $("#load-option-about").attr("onclick", "appRemote.AccordionClick_About('" + o + "')"), $("#load-option-about").next(".accordion-content").html(""), $("#load-option-about").next(".accordion-content").hide(), $("#load-option-text").addClass("active"), $("#load-option-text").attr("onclick", "appRemote.AccordionClick_Options('" + o + "')"), $("#load-option-text").next(".accordion-content").show(), $("#app-load-options").length > 0 && (Z = g, eo = m, $("#moveresize-left").val(p), $("#moveresize-top").val(l), $("#moveresize-width").val(c), $("#moveresize-height").val(d), $("#moveresize-left").spinner({ min: 0 }), $("#moveresize-top").spinner({ min: 0 }), $("#moveresize-width").spinner({ min: parseInt(g) }), $("#moveresize-height").spinner({ min: parseInt(m) }), appRemote.IsComplexWorkspaceMode() ? (no ? $("#app-load-options").show() : $("#app-load-options").hide(), appRemote.ConvertBitToBoolean(t) ? $("#options-btn-close").hide() : ($("#options-btn-close").show(), $("#options-btn-open").hide(), $("#options-btn-update").show())) : ($("#options-btn-close").hide(), $("#options-btn-open").hide(), $("#options-btn-update").hide(), $("#app-load-options").hide()), $("#ddl_appDropdownSelector").val("" != s ? A(s) : A(e.d[1])), $("#rb_norm").prop("checked", !0), appRemote.ConvertBitToBoolean(t) ? ($("#rb_norm").prop("checked", !0), $("#pnl_appMoveResize").hide()) : ($("#pnl_appMoveResize").hide(), $("#resize-div").hide(), appRemote.ConvertBitToBoolean(u) || appRemote.ConvertBitToBoolean(_) ? appRemote.ConvertBitToBoolean(_) && ($("#pnl_appMoveResize").show(), $("#resize-div").show()) : $("#pnl_appMoveResize").show(), appRemote.ConvertBitToBoolean(n) && $("#rb_max").prop("checked", !0), appRemote.ConvertBitToBoolean(a) && $("#rb_min").prop("checked", !0)), "" != r && $("#last-updated").html("<b class='pad-right-sml'>Last Updated:</b>" + r), appRemote.ConvertBitToBoolean(u) ? $("#div_max_rb_holder").show() : $("#div_max_rb_holder").hide()), $("#no-options-available").hide(), $("#options-btn-device").hide(), appRemote.ConvertBitToBoolean(h) && "" != f && ($("#options-btn-device").attr("href", f), $("#options-btn-device").show()), !ao && no && appRemote.IsComplexWorkspaceMode() || ($("#options-btn-close").hide(), $("#options-btn-open").hide(), $("#options-btn-update").hide(), "none" == $("#options-btn-device").css("display") && $("#no-options-available").show()) } else $("#no-options-available").hide(), $("#options-btn-device").hide(), $("#options-btn-close").hide(), $("#pnl_appMoveResize").hide(), $("#ddl_appDropdownSelector").val("1"), $("#rb_norm").prop("checked", !0), $("#last-updated").html(""); $(document).tooltip({ disabled: !0 }), $("#pnl_adminPages").hide(), $("#pnl_icons").hide(), $(document).tooltip({ disabled: !1 }), $("#pnl_options").show(), to = !1 }, error: function () { alert("Error trying to access account. Please try again."), no && (no = !1, h()), to = !1 } }) } } function P() { if (H(), $(".app-icon").find(".app-icon-font").removeClass("font-bold"), $(".loaded-app-holder").each(function () { var e = $(this).attr("id").replace("-loadedapp", ""); $(".app-icon[data-appid='" + e + "']").find(".app-icon-font").addClass("font-bold") }), appRemote.IsComplexWorkspaceMode()) { var e = setTimeout(function () { x("Loading Remote...") }, 1500); $(".app-icon").removeClass("active"), $(".workspace-reminder").each(function () { $(this).remove() }), $.ajax({ url: "WebServices/AcctSettings.asmx/GetAllOpenedApps", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (o) { if (clearTimeout(e), I(), null != o.d) for (var t = 0; t < o.d.length; t++) { var i = $(".app-icon[data-appid='" + o.d[t][0] + "']"); if (i.addClass("active"), "" != o.d[t][1]) { var a = "<span class='workspace-reminder font-no-bold'>" + A(o.d[t][1]) + "</span>"; i.append(a) } } } }) } else clearTimeout(e), I() } function A(e) { return e.replace("workspace_", "") } function L(e) { $("#load-option-about").hasClass("active") || (B(), W("load-option-about"), $("#load-option-about").next(".accordion-content").html("<h4>Loading...</h4>"), $.ajax({ url: "WebServices/AcctSettings.asmx/GetAppRemoteAboutStats", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","option": "about" }', contentType: "application/json; charset=utf-8", success: function (o) { if (null != o.d && ($("#load-option-about").next(".accordion-content").html(o.d[0]), 3 == o.d.length)) { appRemote.RatingStyleInit(".app-rater-" + e, o.d[1], !0, e, !0); for (var t = 0; t < o.d[2].length; t++) { var i = o.d[2][t]; appRemote.RatingStyleInit($(".ratingreviews-div").eq(t)[0], i.Rating, !0, i.AppID, !1) } } to = !1 }, error: function () { $("#load-option-about").next(".accordion-content").html("<h4>Error! Could not load.</h4>"), to = !1 } })) } function O() { $("#load-option-text").hasClass("active") || (B(), W("load-option-text")) } function B() { $(".accordion-header").each(function () { $(this).removeClass("active"), $(this).next(".accordion-content").slideUp(appRemote_Config.animationSpeed) }) } function W(e) { $("#" + e).addClass("active"), setTimeout(function () { $("#" + e).next(".accordion-content").slideDown(appRemote_Config.animationSpeed) }, appRemote_Config.animationSpeed) } function j() { if (!to) { to = !0; var e = "", o = !1; e += $("#ddl_appDropdownSelector").val() + ";", $("#rb_max").is(":checked") ? (e += "maximize;", o = !0) : e += $("#rb_min").is(":checked") ? "minimize;" : "normal;"; var t = parseInt($("#moveresize-top").val()), i = parseInt($("#moveresize-left").val()); (0 > t || null == t || "NaN" == t.toString() && null != t) && (t = 0), (0 > i || null == i || "NaN" == i.toString() && null != i) && (i = 0); var a = parseInt($("#moveresize-width").val()), n = parseInt($("#moveresize-height").val()); (Z > a || null == a || "NaN" == a.toString() && null != a) && (a = Z), (eo > n || null == n || "NaN" == n.toString() && null != n) && (n = eo), e += t + ";" + i + ";" + a + ";" + n + ";", x("block" == $("#options-btn-update").css("display") ? "Refreshing App..." : "Loading App..."), $.ajax({ url: "WebServices/AcctSettings.asmx/UpdateAppRemote", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","options": "' + escape(e) + '" }', contentType: "application/json; charset=utf-8", success: function (e) { to = !1, appRemote.ConvertBitToBoolean(e.d) ? (I(), T(appRemote_Config.remoteId, appRemote_Config.remoteName)) : ($("#loading-message").html("<span style='color: Red;'>Could not load!</span>"), setTimeout(function () { I(), no && (no = !1, h()) }, appRemote_Config.closeTimeout)) }, error: function () { $("#loading-message").html("<span style='color: Red;'>Could not load!</span>"), setTimeout(function () { I(), no && (no = !1, h()) }, appRemote_Config.closeTimeout), to = !1 } }) } } function M() { var o = $("#" + appRemote_Config.remoteId + "-loadedapp"); o.length > 0 && o.remove(), $("#pnl_options-minHeight").hide(); var t = $("#options-btn-device").attr("href"); t.toLowerCase().indexOf("externalappholder.aspx?appid") > 0 && (t += "&hidetoolbar=true"); var i = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + e())); $("#db-b").show(), $("#db-c").show(), $("#apps_header_btn").hide(), $("#chat_header_btn").hide(), $("#pages_header_btn").hide(), $("#" + appRemote_Config.remoteId).find(".app-icon-font").addClass("mobile-open"), $("#pnl_options").append("<div class='loading-background-holder'></div>"), $("#pnl_options").append("<iframe id='" + appRemote_Config.remoteId + "-loadedapp' src='" + t + "' frameborder='0' class='loaded-app-holder' style='height: " + i + "px;'></iframe>"), $(".loaded-app-holder").one("load", function () { $(".loading-background-holder").remove() }) } function H() { var e = -(2 * $("#" + appRemote_Config.remoteId + "-loadedapp").outerHeight()); $("#" + appRemote_Config.remoteId + "-loadedapp").css({ visibility: "hidden", position: "absolute", top: e }), $("#db-b").hide(), $("#db-c").hide(), $("#apps_header_btn").show(), $("#chat_header_btn").show() } function z() { to || (to = !0, x("Closing App..."), $.ajax({ url: "WebServices/AcctSettings.asmx/UpdateAppRemote", type: "POST", data: '{ "id": "' + appRemote_Config.remoteId + '","options": "close" }', contentType: "application/json; charset=utf-8", success: function (e) { to = !1, appRemote.ConvertBitToBoolean(e.d) ? (I(), T(appRemote_Config.remoteId, appRemote_Config.remoteName)) : ($("#loading-message").html("<span style='color: Red;'>Error! Try again.</span>"), setTimeout(function () { I(), no && (no = !1, h()) }, appRemote_Config.closeTimeout)) }, error: function () { $("#loading-message").html("<span style='color: Red;'>Error! Try again.</span>"), setTimeout(function () { I(), no && (no = !1, h()) }, appRemote_Config.closeTimeout), to = !1 } })) } function U(e) { e && (oo = !0), $("#updatePnl_AppList").sortable({ axis: "y", cancel: ".app-icon-category-list, #Category-Back, #notifications", containment: "#updatePnl_AppList", opacity: .6, scrollSensitivity: 40, scrollSpeed: 40, start: function () { $(document).tooltip({ disabled: !0 }) }, stop: function () { var e = ""; $(".app-icon").each(function () { var o = $(this).attr("data-appid"); "" != o && -1 == e.indexOf(o) && (e += o + ",") }), oo && $.ajax({ url: "WebServices/SaveControls.asmx/App_UpdateIcons", type: "POST", data: '{ "appList": "' + escape(e) + '" }', contentType: "application/json; charset=utf-8" }), $(document).tooltip({ disabled: !1 }) } }), $("#updatePnl_AppList").disableSelection() } function E() { so || (so = !0, $.ajax({ url: "WebServices/NotificationRetrieve.asmx/CheckForNewNotifications", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (e) { var o = parseInt(e.d); $("#notifications").find("#total-noti").html(o), 0 == o ? $("#notifications").removeClass("has-notifications").addClass("no-notifications") : $("#notifications").removeClass("no-notifications").addClass("has-notifications"), so = !1, $(window).resize(), setTimeout(function () { E() }, appRemote_Config.notiInterval) }, error: function () { so = !1, setTimeout(function () { E() }, appRemote_Config.notiInterval) } })) } function G(e) { if (!ro) { ro = !0, 0 == $(".ddLoadingMessage").length && e && $(".table-notiMessages-div").prepend(lo); var o = new Array; $("#table_NotiMessages tr").each(function (e) { o[e] = $(this).attr("id") }); var t = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/LoadUserNotifications"; $.ajax({ url: t, type: "POST", data: '{ "_currIds": "' + o + '","siteTheme": "' + appRemote_Config.siteTheme + '" }', contentType: "application/json; charset=utf-8", success: function (e) { $(".ddLoadingMessage").remove(), null != e.d && "" != e.d ? ($("#NotificationHolder").html($.trim(e.d)), $("#no-notifications-id").length > 0 ? $("#lb_clearNoti").hide() : $("#lb_clearNoti").show()) : $("#lb_clearNoti").hide(), ro = !1, q(), F(), $(window).resize() }, error: function () { $(".ddLoadingMessage").remove(), q(), $("#NotificationHolder").html("<h3 class='pad-top-big pad-bottom-big' style='color: Red; text-align: center;'>Error retrieving notifications!</h3>"), $("#lb_clearNoti").hide(), ro = !1 } }) } } function D() { if (!po && !ro) { po = !0; var e = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/LoadMoreUserNotifications", o = new Array; $("#table_NotiMessages tr").each(function (e) { o[e] = $(this).attr("id") }), $.ajax({ url: e, type: "POST", data: '{ "_currIds": "' + o + '","_currCount": "' + parseInt($("#table_NotiMessages tr").length) + '","siteTheme": "' + appRemote_Config.siteTheme + '" }', contentType: "application/json; charset=utf-8", success: function (e) { $(".ddLoadingMessage").remove(), null != e.d && "" != e.d && $("#table_NotiMessages").append($.trim(e.d)), q(), po = !1, F(), $(window).resize() }, error: function () { $(".ddLoadingMessage").remove(), q(), $("#NotificationHolder").append("<h3 class='pad-bottom-big' style='color: Red; text-align: center;'>Error retrieving notifications!</h3>"), po = !1 } }) } } function F() { var e = document.getElementById("notifications-viewtable"); if (null != e) { var o = $("#notifications-viewtable").innerHeight(), t = $("#notifications-viewtable").outerHeight(); if (o >= e.scrollHeight || e.scrollHeight < t) { var i = parseInt($("#notifications").find("#total-noti").html()), a = parseInt($("#table_NotiMessages tr").length); i > a && ($(".ddLoadingMessage").remove(), $("#NotificationHolder").append(lo), D()) } } } function q() { $("#notifications-viewtable").scroll(function () { var e = document.getElementById("notifications-viewtable"); if (null != e) { var o = $("#notifications-viewtable"), t = o.scrollTop(); if (t > 0 && t + o.height() >= e.scrollHeight) { var i = parseInt($("#notifications").find("#total-noti").html()), a = parseInt($("#table_NotiMessages tr").length); i > a && ($(".ddLoadingMessage").remove(), $("#NotificationHolder").append(lo), D()) } } }) } function V() { x("Clearing..."); var e = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/DeleteNotifications"; $.ajax({ url: e, type: "POST", data: '{ "id": "ClearAll" }', contentType: "application/json; charset=utf-8", success: function (e) { appRemote.ConvertBitToBoolean(e.d) && (I(), J()) } }) } function J() { $("#notifications").find("#total-noti").html("0"), $("#notifications").removeClass("has-notifications").addClass("no-notifications"); var e = window.location.href.split("#?"); e.length > 0 && (e = e[0]), e.indexOf("#") != e.length - 1 && (e += "#"), "" != appRemote_Config.categoryId && "" != appRemote_Config.categoryName && (e += "?id=" + appRemote_Config.categoryId + "&category=" + appRemote_Config.categoryName), "" != appRemote_Config.remoteId && "" != appRemote_Config.remoteName && (e += "" != appRemote_Config.categoryId && "" != appRemote_Config.categoryName ? "&" : "?", e += "appId=" + appRemote_Config.remoteId + "&name=" + appRemote_Config.remoteName), window.location = e } function Q() { $("#NotificationHolder").html(""), ro = !1, G(!0) } function K() { "none" != $("#Login-holder").css("display") ? ($("#Login-holder").hide(), $("#iframe-createaccount-holder").html("<iframe id='iframe-demo' src='SiteTools/iframes/CreateAccount.aspx' frameborder='0' width='100%' style='visibility: hidden;'></iframe>"), $("#iframe-createaccount-holder").append("<div style='text-align: center;'><h3 id='loadingControls'>Loading Controls. Please Wait...</h3></div>"), $("#CreateAccount-holder").show(), $("#iframe-demo").load(function () { $("#loadingControls").remove(), $("#iframe-demo").css({ height: "475px", visibility: "visible" }) })) : ($("#CreateAccount-holder, #ForgotPassword-holder").hide(), $("#iframe-createaccount-holder").html(""), $("#Login-holder").show()) } function X() { "block" != $("#ForgotPassword-holder").css("display") ? ($("#tb_username_recovery").val(""), $("#lbl_passwordResetMessage").html(""), $("#UserNameRequired_recovery").css("visibility", "hidden"), $("#Login-holder").hide(), $("#ForgotPassword-holder").show()) : ($("#ForgotPassword-holder").hide(), $("#Login-holder").show()) } function Y(e, o, t, i, a) { try { var n = !1; t && (n = !0); var s = openWSE.siteRoot() + "App_Themes/Standard"; $(e).attr("data-average", o), $(e).attr("data-id", "1"); var r = "big"; a || (r = "small"), $(e).jRating({ step: !0, type: r, showRateInfo: !1, canRateAgain: !0, nbRates: 100, bigStarsPath: s + "/Icons/star-rating-lrg.png", smallStarsPath: s + "/Icons/star-rating-sml.png", isDisabled: n, decimalLength: 2, length: 4, rateMax: 4, rateMin: 0, sendRequest: !0 }), a || $(e).find(".jStar").addClass("jStar-Small") } catch (p) { } } var Z = 0, eo = 0, oo = !1, to = !1, io = !1, ao = !1; $(document.body).on("click", "#db-b", function () { appRemote.HideApp(), appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S() }), $(document.body).on("click", "#db-c", function () { $("#db-b").hide(), $("#db-c").hide(), $("#apps_header_btn").show(), $("#chat_header_btn").show(), $("#pages_header_btn").show(), "block" == $("#notifications-viewtable").css("display") ? S() : "adminPages" == appRemote_Config.categoryId ? ($("#pnl_adminPage_iframe").hide(), $("#pnl_adminPage_iframe").html(""), $("#pnl_adminPages").show(), appRemote_Config.categoryId = "adminPages", appRemote_Config.categoryName = "pageSelect", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S()) : "chatClient" == appRemote_Config.categoryId ? ($(".iFrame-chat").each(function () { $(this).remove() }), appRemote_Config.categoryId = "chatClient", appRemote_Config.categoryName = "userSelect", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S()) : ($("#pnl_options").find("#" + appRemote_Config.remoteId + "-loadedapp").remove(), $("#" + appRemote_Config.remoteId).find(".app-icon-font").removeClass("mobile-open"), $("#load-option-text").html("<b>" + appRemote_Config.remoteName + "</b> Load Options <span class='img-menudropdown' style='float: right!important; margin-right: 3px!important; margin-top: 2px!important;'></span>"), $("#pnl_options-minHeight").show(), $("#options-btn-device").show(), appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S()) }), $(document.body).on("click", "#db-s", function () { if (!to) if ($("#loading-message-modal").html(""), "none" == $("#workspace-selector-overlay").css("display") || "none" == $("#workspace-selector-modal").css("display")) { to = !0; var e = setTimeout(function () { x("Getting Current...") }, 1500); $.ajax({ url: "WebServices/AcctSettings.asmx/GetCurrentWorkspace_Remote", type: "POST", data: "{ }", contentType: "application/json; charset=utf-8", success: function (o) { to = !1, clearTimeout(e), I(), "" != o.d && $("#dropdownSelector").val(o.d), $("#workspace-selector-overlay, #workspace-selector-modal").show() }, error: function () { $("#loading-message").html("<span style='color: Red;'>Error! Try again.</span>"), setTimeout(function () { I(), no && (no = !1, h()) }, appRemote_Config.closeTimeout), to = !1 } }) } else $("#workspace-selector-overlay, #workspace-selector-modal").hide() }), $(document.body).on("click", "#cc-s", function () { appRemote_Config.categoryId = "chatClient", appRemote_Config.categoryName = "userSelect", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S() }), $(document.body).on("click", "#wl-s", function () { appRemote_Config.categoryId = "", appRemote_Config.categoryName = "", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S() }), $(document.body).on("click", "#login-s", function () { "block" != $("#pnl_login").css("display") ? window.location += -1 == window.location.href.indexOf("?") ? "?loginPnl=true" : "&loginPnl=true" : S() }), $(document.body).on("click", "#ap-s", function () { appRemote_Config.categoryId = "adminPages", appRemote_Config.categoryName = "pageSelect", appRemote_Config.remoteId = "", appRemote_Config.remoteName = "", S() }), $(document.body).on("click", "#workspace-selector-overlay", function () { to || ("none" != $("#workspace-selector-overlay").css("display") || "none" != $("#workspace-selector-modal").css("display")) && ($("#loading-message-modal").html(""), $("#workspace-selector-overlay, #workspace-selector-modal").hide()) }), $(document.body).on("keydown", "#moveresize-top, #moveresize-left, #moveresize-width, #moveresize-height", function (e) { try { if (13 == e.which) return e.preventDefault(), j(), !1 } catch (o) { if (13 == e.keyCode) return e.preventDefault(), j(), !1; delete o } }), $(document.body).on("change", "#dropdownSelector", function () { N($(this).val()) }), $(document.body).on("click", "#Category-Back", function () { a(!0) }), $(document.body).on("click", "#notifications", function () { $(this).hasClass("has-notifications") && ("block" != $("#notifications-viewtable").css("display") ? window.location += -1 == window.location.href.indexOf("?") ? "?notiOn=true" : "&notiOn=true" : S()) }), $(document.body).on("click", "#tryconnect", function () { x("Trying to Sync"), m() }), $(document.body).on("click", "#groupLogin, #changeGroupLogin", function () {
        "block" != $("#grouplogin-list").css("display") ? window.location += -1 == window.location.href.indexOf("?") ? "?groupLogin=true" : "&groupLogin=true" : S()
    }), $(document.body).on("click", "#groupLogout", function () { x("Please Wait"), $("#hf_LogoutOfGroup").val((new Date).toString()), __doPostBack("hf_LogoutOfGroup", "") }); var no = !1, so = !1, ro = !1, po = !1, lo = "<div class='ddLoadingMessage'><h3>Loading Notifications. Please Wait...</h3></div>"; return { GetTopBtnsHeight: e, init: r, ConvertBitToBoolean: o, IsComplexWorkspaceMode: t, StartLoadingOverlay: x, CloseStartLoadingOverlay: I, AppsSortUnlocked: U, LoadOptions: w, LoadAdminPage: v, LoginAsGroup: s, SetAdminMode: l, SetDemoMode: c, Load: h, CategoryClick: i, OnWorkspaceClick: N, AccordionClick_Options: O, AccordionClick_About: L, OpenApp: j, LoadApp: M, HideApp: H, CloseApp: z, RefreshNotifications: Q, CheckForNewNotifications: E, NotiActionsClearAll: V, ResetNoti: J, UpdateURL: S, LoadCreateAccountHolder: K, LoadRecoveryPassword: X, RatingStyleInit: Y, GroupLoginModal: n }
}(), openWSE = function () { return { NotiActionsHideInd: function (e) { appRemote.StartLoadingOverlay("Deleting..."); var o = $(e).closest("tr"), t = o.attr("id"), i = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/DeleteNotifications"; $.ajax({ url: i, type: "POST", data: '{ "id": "' + t + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (appRemote.ConvertBitToBoolean(e.d)) if (o.hide(), appRemote.CloseStartLoadingOverlay(), o.remove(), "1" == $("#notifications").find("#total-noti").html()) appRemote.ResetNoti(); else { var t = parseInt($("#notifications").find("#total-noti").html()); t -= 1, $("#notifications").find("#total-noti").html(t) } } }) }, AcceptGroupNotification: function (e, o) { appRemote.StartLoadingOverlay("Accepting..."); var t = $(e).closest("tr"), i = t.attr("id"), a = openWSE.siteRoot() + "WebServices/NotificationRetrieve.asmx/AcceptInviteNotifications"; $.ajax({ url: a, type: "POST", data: '{ "id": "' + i + '", "groupId": "' + o + '" }', contentType: "application/json; charset=utf-8", success: function (e) { if (appRemote.ConvertBitToBoolean(e.d)) if (t.hide(), appRemote.CloseStartLoadingOverlay(), t.remove(), "1" == $("#notifications").find("#total-noti").html()) appRemote.ResetNoti(); else { var o = parseInt($("#notifications").find("#total-noti").html()); o -= 1, $("#notifications").find("#total-noti").html(o) } } }) }, siteRoot: function () { var e = ""; return "" != appRemote_Config.siteRootFolder && (e = appRemote_Config.siteRootFolder + "/"), window.location.protocol + "//" + window.location.host + "/" + e }, ExpandAdminLinks: function (e, o) { $(e).hasClass("img-expand-sml") ? ($(e).removeClass("img-expand-sml"), $(e).addClass("img-collapse-sml"), $(e).closest(".app-icon-links").parent().find("." + o).slideDown(appRemote_Config.animationSpeed)) : ($(e).removeClass("img-collapse-sml"), $(e).addClass("img-expand-sml"), $(e).closest(".app-icon-links").parent().find("." + o).slideUp(appRemote_Config.animationSpeed)) } } }(); $(document).ready(function () { appRemote.init(); var e = window.location.href.split("#"); 1 == e.length && (window.location += "#"), appRemote.Load() }), $(function () { $(window).hashchange(function () { appRemote.Load() }) }), $(window).resize(function () { var e = appRemote.GetTopBtnsHeight(); if ($(".iFrame-chat").length > 0) { var o = $(window).height(), t = $("#always-visible").height(), i = $("#container-footer").height(), a = o - (t + i + e); $(".iFrame-chat").height(a - 7) } $(".loaded-app-holder").each(function () { if ("hidden" != $(this).css("visibility")) { var o = Math.abs($(window).height() - ($("#always-visible").outerHeight() + $("#container-footer").outerHeight() + e)); $(this).css({ height: o }) } }), "block" == $("#notifications-viewtable").css("display") && $(".alert-panel-description").each(function () { $(this).css("width", $(window).width() - 135) }) }), function (e, o, t) { function i(e) { return e } function a(e) { return decodeURIComponent(e.replace(n, " ")) } var n = /\+/g, s = e.cookie = function (n, r, p) { if (r !== t) { if (p = e.extend({}, s.defaults, p), null === r && (p.expires = -1), "number" == typeof p.expires) { var l = p.expires, c = p.expires = new Date; c.setDate(c.getDate() + l) } return r = s.json ? JSON.stringify(r) : String(r), o.cookie = [encodeURIComponent(n), "=", s.raw ? r : encodeURIComponent(r), p.expires ? "; expires=" + p.expires.toUTCString() : "", p.path ? "; path=" + p.path : "", p.domain ? "; domain=" + p.domain : "", p.secure ? "; secure" : ""].join("") } for (var d, m = s.raw ? i : a, g = o.cookie.split("; "), h = 0; d = g[h] && g[h].split("=") ; h++) if (m(d.shift()) === n) { var f = m(d.join("=")); return s.json ? JSON.parse(f) : f } return null }; s.defaults = {}, e.removeCookie = function (o, t) { return null !== e.cookie(o, t) ? (e.cookie(o, null, t), !0) : !1 } }(jQuery, document); var cookie = { set: function (e, o, t) { if (openWSE_Config.saveCookiesAsSessions) { var i = openWSE.siteRoot() + "WebServices/SaveControls.asmx/SetCookie"; $.ajax({ url: i, type: "POST", data: '{ "name": "' + e + '","value": "' + o + '" }', contentType: "application/json; charset=utf-8" }) } else { { cookie.get(e) } if (t) { var a = new Date; a.setTime(a.getTime() + 24 * t * 60 * 60 * 1e3); var n = "; expires=" + a.toGMTString() } else var n = ""; document.cookie = e + "=" + o + n + "; path=/" } }, get: function (e) { var o = null; if (openWSE_Config.saveCookiesAsSessions) { var t = openWSE.siteRoot() + "WebServices/SaveControls.asmx/GetCookie"; $.ajax({ url: t, type: "POST", async: !1, data: '{ "name": "' + e + '" }', contentType: "application/json; charset=utf-8", success: function (e) { e && (o = e.d) } }) } else for (var i = e + "=", a = document.cookie.split(";"), n = 0; n < a.length; n++) { for (var s = a[n]; " " == s.charAt(0) ;) s = s.substring(1, s.length); if (0 == s.indexOf(i)) return s.substring(i.length, s.length) } return o }, del: function (e) { if (openWSE_Config.saveCookiesAsSessions) { var o = openWSE.siteRoot() + "WebServices/SaveControls.asmx/DelCookie"; $.ajax({ url: o, type: "POST", data: '{ "name": "' + e + '" }', contentType: "application/json; charset=utf-8" }) } else this.set(e, "", -1) } };
